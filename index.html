<!doctype html>
<html lang="zh-cn">

<head>
  <meta charset="UTF-8" />
  <title>Mod Manager</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />


  <style type="text/css">
    @font-face {
      font-family: "Impact";
      src: url(./fonts/zzz-eng.TTF) format("truetype");
      font-weight: normal
    }

    @font-face {
      font-family: "hongmengti";
      src: url(./fonts/zzz-chs.ttf) format("truetype");
      font-weight: bold
    }

    .font-num {
      font-family: Impact, "Microsoft YaHei", 微软雅黑, "MicrosoftJhengHei", 华文细黑, STHeiti, MingLiu, sans-serif
    }

    .font-hongmeng {
      font-family: hongmengti, "Microsoft YaHei", 微软雅黑, "MicrosoftJhengHei", 华文细黑, STHeiti, MingLiu, sans-serif
    }

    s-chip {
      transform: skew(-20deg);
      position: relative;
    }

    s-chip p {
      display: block;
      transform: skew(20deg);
    }

    .parallelogram {
      transform: skew(-20deg);
      border-radius: 10px;
    }

    .parallelogram * {
      display: block;
      transform: skew(20deg);
    }

    body {
      background-color: #efefef;
      -webkit-overflow-scrolling: touch;
      -webkit-user-drag: none;
      height: 100%
    }

    a {
      text-decoration: none
    }
  </style>

  <link rel="stylesheet" href="sober-theme.css">
  <style>
    html,
    body {
      height: 100%;
      overflow: hidden;
      margin: 0;
      -webkit-tap-highlight-color: transparent;
    }

    s-tooltip p {
      margin: 0;
      line-height: 1;
    }

    p {
      height: fit-content;
      width: fit-content;
    }

    img {
      -webkit-user-drag: none;
      -moz-user-drag: none;
      -ms-user-drag: none;
    }

    s-divider {
      width: 83%;
      margin: 10px 0;
    }

    s-card {
      height: 350px;
      margin: 10px 0;
    }

    :not(:defined) {
      display: none;
    }

    #app {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      padding: 0px;
      height: 100%;
      background-image: url(./src/background.png);
      background-size: cover;
    }


    #preset-list-drawer {
      width: 200px;
      height: 100%;
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      align-items: center;
      justify-content: flex-start;
    }

    #preset-container {
      width: 100%;
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      align-items: center;
      justify-content: flex-start;
    }

    #preset-item {
      margin-top: 10px;
      width: 83%;
    }

    #preset-item-add,
    #preset-item-edit {
      margin-top: 10px;
      width: 83%;
    }

    #main-page {
      width: 80%;
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      justify-content: flex-start;
    }

    #mod-filter {
      display: flex;
      flex-wrap: nowrap;
      align-items: center;
      margin: 7px 12px;
    }

    #mod-filter>* {
      margin: 6px
    }

    #mod-container {
      display: grid;
      grid-column: span 4;
      grid-column-start: span 4;
      grid-column-end: auto;
      grid-template-columns: repeat(auto-fill, 250px);
      grid-gap: 20px;
      align-items: center;
      justify-content: start;
      justify-items: center;
    }

    #apply-btn {
      position: relative;
      bottom: 70px;
      right: 50px;
      font-size: 25px;
      height: 50px;
      width: fit-content;
      align-items: center;
    }

    .preset-list {
      margin: 10px 10px;
    }

    .mod-item,
    .preset-item {
      margin: 5px 0;
    }
  </style>
  <style>
    .tape-container {
      height: 100%;
      width: fit-content;
      position: relative;
      display: flex;
      flex-direction: row;
      margin-left: -200px;
      left: 15%;
      transition: 0.7s;
    }

    .tape-click-area {
      height: 100%;
      width: 100px;
      position: absolute;
      z-index: 99;
      top: 0;
      left: 0;
      background-color: rgba(0, 100, 0, 0);
    }

    .tape-spine {
      height: 100%;
      width: fit-content;
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      justify-content: center;
      align-items: center;
      position: relative;
      z-index: -1;
      transform-origin: 100% 50%;
      background-color: blue;
    }

    .tape-spine img {
      height: 100%;
      width: fit-content;
      object-fit: cover;
      z-index: 1;
      mix-blend-mode: multiply;
      opacity: 1;
    }

    .tape-spine p {
      line-height: 1;
      margin: 0;
      position: absolute;
    }

    .tape-spine-cover {
      height: 100%;
      width: 100%;
      background-image: url(./src/tape-cover.png);
      z-index: 0;
      position: absolute;
    }

    /* 白色衬底 */
    .tape-spine-cover-mask {
      height: 100%;
      width: 100%;
      background-color: white;
      position: absolute;
      z-index: 1;
      opacity: 0.7;
      top: 0;
      left: 0;
    }

    .tape-spine-text {
      height: fit-content;
      width: fit-content;
      text-align: center;
      writing-mode: vertical-rl;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-size: 1.5rem;
      color: rgb(42, 42, 42);
      z-index: 2;
    }

    .tape-box {
      height: 100%;
      width: fit-content;
      position: relative;
      transform-origin: 0% 50%;
    }

    .tape-cover-container {
      height: 100%;
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    .tape-cover-container img {
      height: 100%;
      object-fit: cover;
      opacity: 1;
      top: 0;
      left: 0;
      z-index: 2;
      position: relative;
    }

    .tape-cover {
      background-image: url(./src/tape-cover.png);
      z-index: 1;
      clip-path: polygon(0 0, 100% 0, 100% 50%, 20% 100%, 0 100%);
    }

    .tape-cover-title {
      height: fit-content;
      width: fit-content;
      text-align: left;
      overflow: hidden;
      line-break: normal;
      text-overflow: ellipsis;
      color: rgb(255, 255, 255);
      z-index: 3;
      position: absolute;
      font-size: 2.9rem;
      text-transform: uppercase;
      top: 7%;
      left: 7%;
      max-width: 200px;
      line-height: 1.1;
    }

    .tape-cover-subtitle {
      height: fit-content;
      width: fit-content;
      text-align: left;
      overflow: hidden;
      line-break: normal;
      text-overflow: ellipsis;
      color: rgb(200, 255, 36);
      z-index: 3;
      position: absolute;
      font-size: 1rem;
      text-transform: uppercase;
      top: 40%;
      left: 7%;
      max-width: 200px;
      line-height: 1.1;
      font-weight: 600;
    }

    .tape-body {
      background-image: url(./src/tape.png);
      z-index: -1;
    }
  </style>

  <style>
    /*====================*/
    .fit-parent-width {
      height: 100%;
      width: 0;
      padding-left: 100%;
      overflow: hidden;
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
      position: absolute;
      top: 0;
      left: 0;
    }

    .fit-image-width {
      height: 100%;
      width: fit-content;
      object-fit: cover;
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
      position: relative;
    }
  </style>

</head>


<body>
  <div id="drag-bar" style="position: fixed;width: 100%;height: 30px;-webkit-app-region: drag;">
  </div>


  <s-page id="tape-show" theme="dark" style="display: none;z-index: -1;transition: 0.7s;">
    <!-- -background -->
    <div class="background"
      style="background-image: url(./src/television.jpg);position:absolute;width:100%;height:100%;background-size:cover;background-position:center;background-repeat:no-repeat;filter: blur(10px);z-index: 0;">
    </div>
    <s-button id='create-tape'
      style="position: absolute;top: 70%;left: 50%;transform: translate(-50%,-50%);z-index: 1;">create-tape</s-button>

    <s-button id='next-page'
      onclick="document.getElementById('app').style.display='flex';document.getElementById('tape-show').style.height='0%';document.getElementById('tape-show').style.display='none';"
      style="position: absolute;top: 80%;left: 50%;transform: translate(-50%,-50%);z-index: 1;">back</s-button>
    <!-- -轮播图效果 -->
    <div class="swiper-container"
      style="height: 50%;width: 100%;position: fixed;top: 20%;display: flex;background-color: rgb(0, 255, 255,0);justify-content: center;align-items: center;flex-wrap: nowrap;flex-direction: row;">
    </div>


  </s-page>
  <s-page id="app" theme="dark">
    <!-- -alert -->
    <s-drawer style="width: 100%;" id="drawer-page">
      <!-- -预设控制 -->
      <div slot="start" id="preset-list-drawer">
        <h2>Presets</h2>
        <s-divider></s-divider>
        <div id="preset-container"></div>
        <!-- -新建预设 -->
        <s-button type="outlined" id="preset-item-add">
          <s-icon type="add" slot="start" style="position: absolute;left:20px"></s-icon>
          <p data-translate-key="creat-preset" style="align-self: auto;width: fit-content;height: fit-content;">新建预设</p>
        </s-button>
        <!-- -编辑预设 -->
        <s-button type="outlined" id="preset-item-edit" style="align-items: center;">
          <s-icon type="more_horiz" slot="start" style="position: absolute;left:20px"></s-icon>
          <p data-translate-key="edit-preset" style="align-self: auto;width: fit-content;height: fit-content;">编辑预设</p>
        </s-button>



        <div id="placeholder" style="flex: 1;"></div>
        <div id="bottom-buttons"
          style="width: 83%;display: flex;padding: 15px 21px;flex-direction: row;flex-wrap: nowrap;align-items: center;">
          <!-- -设置按钮 -->
          <s-tooltip>
            <s-icon-button slot="trigger" id="settings-show-button">
              <s-icon>
                <svg viewBox="0 -960 960 960">
                  <path
                    d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z">
                  </path>
                </svg>
              </s-icon>
            </s-icon-button>

            <p data-translate-key="settings">设置</p>
          </s-tooltip>
          <!-- -全屏按钮-->
          <s-tooltip>
            <s-icon-button slot="trigger" id="fullscreen-button">
              <s-icon>
                <svg viewBox="0 -960 960 960">
                  <path id="fullscreen-button-svgpath"
                    d="M120-120v-200h80v120h120v80H120Zm520 0v-80h120v-120h80v200H640ZM120-640v-200h200v80H200v120h-80Zm640 0v-120H640v-80h200v200h-80Z">
                  </path>
                </svg>
              </s-icon>
            </s-icon-button>
            <p data-translate-key="fullscreen">全屏</p>
          </s-tooltip>
          <!-- -关闭按钮 -->
          <s-tooltip>
            <s-icon-button slot="trigger" id="close-button" onclick="window.close()">
              <s-icon>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                  <path
                    d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z">
                  </path>
                </svg>
              </s-icon>
            </s-icon-button>
            <p data-translate-key="close">关闭</p>
          </s-tooltip>
          <!-- -打开实验性功能页面 -->
          <s-tooltip>
            <s-icon-button slot="trigger" id="open-test-page"
              onclick="document.getElementById('tape-show').style.display='flex';document.getElementById('tape-show').style.height='100%';document.getElementById('app').style.display='none';">
              <s-icon>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                  <path
                    d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z">
                  </path>
                </svg>
              </s-icon>
            </s-icon-button>
            <p data-translate-key="open-test-page">打开实验性功能页面</p>
          </s-tooltip>

        </div>

      </div>


      <!-- -主页面 -->
      <div id="main-page">
        <!-- -顶部导航栏 -->

        <s-appbar
          style="width: 100%;height: 60px;padding: 10px 0px;display: flex;backdrop-filter: blur(7px);border-bottom:1px solid var(--s-color-on-surface);">
          <!--左侧菜单按钮-->
          <s-icon-button slot="navigation" id="preset-list-button">
            <s-icon type="menu"></s-icon>
          </s-icon-button>
          <!--标题-->
          <div slot="headline"
            style="display: flex;align-items: center;justify-content: center;-webkit-app-region: drag;">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
              y="0px" width="50px" height="41px" viewBox="0 0 229 244">
              <image id="image0" width="229" height="244" x="0" y="0" xlink:href="icon.ico" />
            </svg>
            <p style="margin-left: 10px;" data-translate-key="title">绝区零mod管理器</p>
          </div>
          <div id="drag-bar" style="height: 100%;-webkit-app-region: drag;flex: 1;">
          </div>
          <!--右侧信息开关-->
          <div slot="action">
            <s-icon-button style="margin-right: 20px;" id="info-show-button" type="filled">
              <s-icon>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                  <path
                    d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z">
                  </path>
                </svg>
              </s-icon>
            </s-icon-button>

          </div>


        </s-appbar>

        <!-- -模组筛选选项（根据角色筛选mod） -->
        <div id="mod-filter-container" style="display: flex;flex-wrap: nowrap;align-items: center;margin: -6px 7px;">
          <s-chip selectable="ture" type="default;" id="mod-filter-all">
            <p style="width: fit-content;" data-translate-key="all">全部</p>
          </s-chip>
          <s-scroll-view
            style="margin-left:-6px;height: 100%;width: 100%;overflow-x: hidden;overflow-y: hidden;white-space: nowrap;"
            id="mod-filter-scroll">
            <div id="mod-filter" style="display: flex;flex-wrap: nowrap;align-items: center;width: fit-content;">
            </div>
          </s-scroll-view>

        </div>
        <!-- -模组列表 -->
        <s-scroll-view class="mod-list" style="margin-left: 10px;">
          <div id="mod-container" style="width: 100%">
          </div>
          <div style="height: 250px"></div>
        </s-scroll-view>

        <!-- -应用按钮 -->
        <div style="display: flex;flex-direction: row-reverse;flex-wrap: nowrap;height: 0;">
          <s-button id="apply-btn">
            <s-icon slot="start" style="height:fit-content;width: fit-content;margin-right: -5px;">
              <svg width="40" height="40" viewBox="0 -960 960 960">
                <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"></path>
              </svg>
            </s-icon>
            <p style="position: relative;top: -3px;margin-left: 10px;width: fit-content;height: fit-content;" data-translate-key="apply">
              应用配置</p>
          </s-button>

        </div>

      </div>


      <!-- -属性详情界面 -->

      <div slot="end" id="info-page"
        style="display: flex;justify-content: flex-start;flex-wrap: nowrap;flex-direction: column;align-items: center;width:300px;">

        <s-card
          style="height: fit-content;width: 100%;display:flex;flex-direction: column;align-items: center;justify-content: center;align-content: flex-start;flex-wrap: nowrap;">
          <div style="width: 83%;height: fit-content;padding: 10px 0px;">
            <h2 id="mod-info-name" style="white-space:normal;word-break:keep-all;height: fit-content;">Mod name</h2>
            <s-divider style="margin-top: -11px;width: 100%;"></s-divider>

          </div>
          <p id="mod-info-character"
            style="margin-top: -12px;font-size: small;color: gray;height: fit-content;width: fit-content;margin-bottom: 10px;padding-bottom: 10px;">
            Character</p>
        </s-card>

        <s-divider style="margin-top: 0px;"></s-divider>
        <s-scroll-view style="height: 100%;width: 100%;">
          <div id="mod-info-container" style="display: flex;flex-direction: column;align-items: center;">

            <div id="img-container" style="width: 280px;height: 224px; border-radius: 10px; overflow: hidden;">
              <img id="mod-info-image"
                style="width: 100% ;height:100%;max-width: 100%; max-height: 100%; object-fit: cover;" src="default.png"
                alt="Mod Image"> </img>
            </div>
            <s-card style="height: auto;width: 100%;display:flex;">
              <div slot="text" style="height: auto;width: 250px;display:flex;">
                <s-scroll-view style="height: 100%;width: 110%;">
                  <p id="mod-info-description" style="white-space: normal;">Mod Description</p>
                  <div style="height: 30px;"></div>
                </s-scroll-view>
              </div>
            </s-card>
            <s-divider></s-divider>


            <s-button id="open-mod-dir" type="outlined" style="width: 83%;"
              data-translate-key="open-mod-dir">打开mod文件夹</s-button>
            <s-button id="edit-mod-info" type="outlined" style="width: 83%;margin-top: 7px;"
              data-translate-key="edit-mod-info">编辑信息</s-button>
          </div>
        </s-scroll-view>

      </div>
    </s-drawer>

    <!-- -snackbar -->
    <s-snackbar>
      Snackbar Message
      <s-button type="text" slot="action" data-translate-key="close"> 关闭 </s-button>
    </s-snackbar>

    <!-- -dialog -->
    <!-- -询问文件保存位置 -->
    <s-dialog id="settings-dialog">
      <div slot="headline" data-translate-key="settings"> 设置 </div>

      <div slot="text">
        <div id="setting-get-theme">
          <h3 data-translate-key="theme"> 主题 </h3>
          <p data-translate-key="dialog-ask-for-theme"> 请选择主题 </p>
          <div id="theme-picker">
            <s-chip selectable="true" type="default" selectable="true" id="auto">
              <p data-translate-key="auto" >自动</p>
            </s-chip>
            <s-chip selectable="true" type="default" selectable="true" id="dark">
              <p data-translate-key="dark">暗色</p>
            </s-chip>
            <s-chip selectable="true" type="default" selectable="true" id="light">
              <p data-translate-key="light">亮色</p>
            </s-chip>
          </div>
        </div>
        <div id="settings-get-rootdir" >
          <h3 data-translate-key="mod-source-path">模组资源位置 </h2>
          <p data-translate-key="dialog-ask-for-modResourceBackup"> 请输入文件保存位置 </p>

          <s-text-field style="display: grid" label="请输入文件保存位置">
            <input type="text" id="set-rootdir-input">
          </s-text-field>
        </div>
        <div id="settings-init-config" >
          <h3 data-translate-key="init-config"> 初始化配置 </h3>
          <p data-translate-key="dialog-ask-for-initConfig"> 确定要初始化所有配置吗？ </p>
        <s-button type="outlined" id="init-config-button" style="margin-top: 10px;"
          data-translate-key="init">
          初始化所有配置
        </s-button>
        </div>
      </div>

      

      <s-button slot="action" type="text" id="dialog-cancel" data-translate-key="cancle">取消</s-button>
      <s-button slot="action" type="text" id="set-rootdir-confirm" data-translate-key="confirm">确定</s-button>
    </s-dialog>

    <!-- -创建预设 -->
    <s-dialog id="add-preset-dialog">
      <div slot="headline" data-translate-key="ask-preset-name"> 请输入预设名称 </div>
      <div slot="text">
        <s-text-field style="display: grid" label="please input preset name">
          <input type="text" id="add-preset-name">
        </s-text-field>
      </div>
      <s-button slot="action" type="text" id="dialog-cancel" data-translate-key="cancle">取消</s-button>
      <s-button slot="action" type="text" id="preset-add-confirm" data-translate-key="confirm">确定</s-button>
    </s-dialog>

    <!-- -警告未知mod -->
    <s-dialog id="unknown-mod-dialog">
      <div slot="headline" data-translate-key="unknown-mod"> 未知mod </div>
      <div slot="text">
        <p data-translate-key="dialog-ask-for-unknown-mod">
          在mod列表中发现了未知mod，是否添加到modResourceBackup中?
          如果选择不添加，程序将会忽略这些mod，但是可能会导致这些mod无法被该程序管理，并且可能会导致其他mod无法正常运行。
        </p>
        <p data-translate-key="unknown-mod-list"> 未知mod列表： </p>
        <ul id="unknown-mod-list">
        
        </ul>
              </div>
      <s-button slot="action" type="text" id="unknown-mod-ignore" data-translate-key="ignore">忽略</s-button>
      <s-button slot="action" type="text" id="unknown-mod-confirm" data-translate-key="add-to-modResourceBackpack">添加到modResourceBackup</s-button>

    <!-- -要求刷新 -->
    <s-dialog id="refresh-dialog">
      <div slot="headline" data-translate-key="dialog-ask-for-refresh"> 点击下方按钮或者重新打开程序以应用配置 </div>
      <div slot="text" style="display: flex;justify-content: center;">
        <s-button type="outlined" id="refresh-button" style="width: 83%;" data-translate-key="refresh"
          onclick="location.reload()">刷新</s-button>
      </div>
    </s-dialog>
  </s-page>
  <script type="module" src="renderer.js"></script>
  <script type="module">
    import './node_modules/sober/dist/sober.min.js';
  </script>
</body>

</html>